def move(file):
    matrix = file
    i = 0
    while True:
        user = find_user(file)
        line, position = user
        current_position = matrix[line][0][position]
        print(current_position)
        if current_position == '^':
            while True:
                if line <= 0:
                    wall = True
                    break
                elif  matrix[line-1][0][position] != "#":
                    print("move")
                    matrix = replace_step(matrix, line, position, "X")
                    matrix = replace_step(matrix, line-1, position, "^")
                    line -= 1
                elif matrix[line-1][0][position] == "#":
                    print("replace")
                    matrix = replace_step(matrix, line, position, ">")
                    break
            nice_print(matrix)
        elif current_position == '>':
            while True:
                if position + 1 < len(matrix[line][0]) and matrix[line][0][position+1] != "#":
                    matrix = replace_step(matrix, line, position, "X")
                    matrix = replace_step(matrix, line, position+1, ">")
                    position += 1
                    print("move")
                elif position + 1 >= len(matrix[line][0]):
                    wall = True
                    replace_step(matrix, line, position, "X")
                    print("break")
                    break
                elif matrix[line][0][position+1] == "#":
                    matrix = replace_step(matrix, line, position, "v")
                    print("replace")
                    break
            nice_print(matrix)
            continue
        elif current_position == 'v':
            while True:
                if line + 1 >= len(matrix):
                    matrix = replace_step(matrix, line, position, "X")
                    wall = True
                    break
                elif line + 1 < len(matrix) and matrix[line+1][0][position] != "#":
                    matrix = replace_step(matrix, line, position, "X")
                    matrix = replace_step(matrix, line+1, position, "v")
                    line += 1
                elif matrix[line+1][0][position] == "#":
                    matrix = replace_step(matrix, line, position, "<")
                    break
            nice_print(matrix)
        elif current_position == '<':
            while True:
                if position == 0:
                    matrix = replace_step(matrix, line, position, "X")
                    wall = True
                    break
                elif position > 0 and matrix[line][0][position-1] != "#":
                    matrix = replace_step(matrix, line, position, "X")
                    matrix = replace_step(matrix, line, position-1, "<")
                    position -= 1
                elif position == 0 or matrix[line][0][position-1] == "#":
                    matrix = replace_step(matrix, line, position, "^")
                    break
            nice_print(matrix)
    return matrix  # Return the matrix after 6 iterations
